\chapter{Mapping Algorithm}
\label{app:mappingAlgo}

Figure \ref{fig:adpcmMapping} shows an example of the mapping generated by the Mapping Algorithm. 

\begin{figure}[h!]
\centering
\begin{subfigure}[t]{.67\textwidth}
\captionsetup{margin=10pt}
\includegraphics[width=\textwidth]{figures/isc_adpcm_IR_adpcm_coder-crop.pdf}
\caption{CFG from Intermediate Source Code}
\label{fig:cfgAdpcmISC}
\end{subfigure}%
~
\begin{subfigure}[t]{.33\textwidth}
\captionsetup{margin=10pt}
\includegraphics[width=\textwidth]{figures/obj_my_ctop_IR_adpcm_coder-crop.pdf}
\caption{\gls{cfg} from optimized Binary Code}
\label{fig:cfgAdpcmBin}
\end{subfigure}%
\caption{Illustration of mapping generated by the Mapping Algorithm}
\label{fig:adpcmMapping}
\end{figure}

The adpcm benchmark application is used from the WCET suite \cite{WCET}. Figure \ref{fig:cfgAdpcmISC} shows the \gls{cfg} extracted from the Instrumented Source Code of the function \emph{adpcm\_coder}. Figure \ref{fig:cfgAdpcmBin} shows the \gls{cfg} extracted from the optimized cross-compiled binary code of the same function. The color coding depicts the mapping between basic blocks of the \gls{cfg}s.

As can be seen, the blue nodes in the ISC were collapsed to a single node in the Binary Code. This was due to Conditional Execution Optimization used by the compiler. Conditional Execution was explained in Section [TODO].

Figure \ref{fig:MyCtopMapping} shows another example of a mapping generated by the algorithm.

\begin{figure}[h!]
\centering
\begin{subfigure}[t]{.5\textwidth}
\captionsetup{margin=10pt}
\includegraphics[width=\textwidth]{figures/isc_my_ctop_IR_main.pdf}
\caption{CFG from Intermediate Source Code}
\label{fig:cfgMyCtopISC}
\end{subfigure}%
~
\begin{subfigure}[t]{.5\textwidth}
\captionsetup{margin=10pt}
\includegraphics[width=\textwidth]{figures/obj_my_ctop_IR_main.pdf}
\caption{\gls{cfg} from optimized Binary Code}
\label{fig:cfgMyCtopBin}
\end{subfigure}%
\caption{Illustration of mapping generated by the Mapping Algorithm}
\label{fig:MyCtopMapping}
\end{figure}

For this example, the \emph{main} function in ctop benchmark from WCET suite \cite{WCET} was used for illustration. In this example, the 2 blue nodes in ISC in Figure \ref{fig:cfgMyCtopISC} were collapsed to a single node in the Binary. Apart from this, no other blocks were merged. The mapping algorithm was able to accurately map the blocks to each other.

Similarly, for the set of benchmarks used for testing the mapping algorithm was able to extract mapping accurately.

%TODO: Mention about O1 level of optimization